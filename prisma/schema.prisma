generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id          String        @id @default(uuid()) @db.Char(36)
  email       String        @unique
  password    String
  profile     Profiles?
  experiences Experiences[]
  deletedAt   DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  Educations  Educations[]

  @@index([email], map: "email_users_idx")
}

model Profiles {
  id         String   @id @default(uuid()) @db.Char(36)
  userId     String   @unique @db.Char(36)
  headline   String?
  location   String?
  multimedia Json // URLs de contenido multimedia
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  user          Users           @relation(fields: [userId], references: [id])
  profileSkills ProfileSkills[]
}

model Experiences {
  id               String    @id @default(uuid()) @db.Char(36)
  userId           String    @db.Char(36)
  title            String
  employmentType   String?
  company          String
  location         String?
  locationType     String?
  startDate        DateTime
  endDate          DateTime?
  currentlyWorking Boolean   @default(false)
  description      String?   @db.LongText
  multimedia       Json // URLs de contenido multimedia
  deletedAt        DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  user             Users              @relation(fields: [userId], references: [id])
  experienceSkills ExperienceSkills[]
}

model Skills {
  id          String    @id @default(uuid()) @db.Char(36)
  name        String    @unique
  icon        String?
  description String?
  deletedAt   DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  profileSkills    ProfileSkills[]
  experienceSkills ExperienceSkills[]
}

model ProfileSkills {
  profileId String @db.Char(36)
  skillId   String @db.Char(36)

  profile Profiles @relation(fields: [profileId], references: [id])
  skill   Skills   @relation(fields: [skillId], references: [id])

  @@id([profileId, skillId])
}

model ExperienceSkills {
  experienceId String @db.Char(36)
  skillId      String @db.Char(36)

  experience Experiences @relation(fields: [experienceId], references: [id])
  skill      Skills      @relation(fields: [skillId], references: [id])

  @@id([experienceId, skillId])
}

model Educations {
  id                String    @id @default(uuid()) @db.Char(36)
  userId            String    @db.Char(36)
  title             String // Título obtenido
  institution       String // Nombre de la institución
  educationType     String // Tipo de educación (pregrado, posgrado, etc)
  startDate         DateTime
  endDate           DateTime?
  currentlyStudying Boolean   @default(false)
  description       String?   @db.LongText
  multimedia        Json // URLs de contenido multimedia (diplomas, certificados)
  deletedAt         DateTime?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  user Users @relation(fields: [userId], references: [id])
}
